<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>カウンター付きテキストエリア カスタマイズ例 サンプル</title>
        <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../common/css/font-awesome.min.css">
        <link rel="stylesheet" href="../../common/css/reset.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style_2.css">
    </head>
    <body>
        <h1 class="theme-headline">カウンター付きテキストエリア カスタマイズ例 sample</h1>
        <div class="container">
            <form class="form">
                <div class="form-textarea">
                    <textarea id="form-message" maxlength="140"></textarea>
                </div>
                <div class="form-inner is-align-right">
                    <span id="counter"></span>文字
                </div>
                <div class="form-button">
                    <button type="submit"><i class="fa fa-send"></i>送信</button>
                </div>
            </form>
        </div>
        <script src="../../common/js/jquery-2.1.1.min.js"></script>
        <script>
        $(function () {
            var MAX_LENGTH   = 140; // 最大文字数
            var ALERT_LENGTH = 10;  // 残り文字数がこの数値以下になったらアラート状態にする。

            $('#form-message').on('keyup', function () {
                var text = $(this).val();
                renderCount(text.length);
            });

            // `span#counter`のエリアを初期化
            renderCount(0);

            function renderCount(currentLength) {
                $('#counter')
                    .text(MAX_LENGTH - currentLength)
                    .toggleClass('is-alert', MAX_LENGTH - currentLength < ALERT_LENGTH);

            }
        });
        </script>
    </body>
</html>